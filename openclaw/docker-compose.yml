
services:
  openclaw:
    image: ghcr.io/phioranex/openclaw-docker:latest
    container_name: openclaw
    restart: unless-stopped
    # Load variables from .env automatically (Compose does this),
    # but we still reference them explicitly below.
    environment:
      OPENCLAW_ENV: ${OPENCLAW_ENV}
      OPENCLAW_HOST: ${OPENCLAW_HOST}
      OPENCLAW_PORT: ${OPENCLAW_PORT}

      OPENAI_API_KEY: ${OPENAI_API_KEY}
      OPENAI_MODEL: ${OPENAI_MODEL}

      OPENCLAW_AGENT_NAME: ${OPENCLAW_AGENT_NAME}
      OPENCLAW_AGENT_ROLE: ${OPENCLAW_AGENT_ROLE}

      OPENCLAW_DATA_PATH: ${OPENCLAW_DATA_PATH}

    # âœ… Start the gateway instead of "--help"
    command:
      - gateway
      - --port
      - "${OPENCLAW_PORT}"
      - --allow-unconfigured

      # Optional, only if your OpenClaw build uses it:
      # OPENCLAW_API_KEY: ${OPENCLAW_API_KEY}

    volumes:
      - ./openclaw-data:/app/data
    
    # ports:
      # - "127.0.0.1:8787:8787"
    networks:
      - openclaw_net

networks:
  openclaw_net:

